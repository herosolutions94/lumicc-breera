{"ast":null,"code":"import _defineProperty from\"/Users/macbook/Desktop/lumicc-breera/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/macbook/Desktop/lumicc-breera/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macbook/Desktop/lumicc-breera/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,Fragment,useState}from\"react\";import{getData,getSiteImages,checkPattern,postData}from\"../../helpers/api\";import{useForm}from\"react-hook-form\";import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Publisher(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];var _useState5=useState({name:'',email:'',phone:'',comments:''}),_useState6=_slicedToArray(_useState5,2),publisher=_useState6[0],setPublisher=_useState6[1];useEffect(function(){getData(\"home-page\").then(function(data){setState(_objectSpread(_objectSpread({},state),{},{content:data.content}));setLoading(true);});},[]);function onPublisherSubmit(){if(publisher.name_error===true||publisher.name===''){setPublisher(_objectSpread(_objectSpread({},publisher),{},{name_error:true,name_msg:\"Required\"}));}else if(publisher.email_error===true||publisher.email===''){setPublisher(_objectSpread(_objectSpread({},publisher),{},{email_error:true,email_error_msg:\"Enter a valid email address\"}));}else if(publisher.phone_error===true||publisher.phone===''){setPublisher(_objectSpread(_objectSpread({},publisher),{},{phone_error:true,phone_msg:\"Enter a valid phone number\"}));}else if(publisher.comment_error===true||publisher.comments===''){setPublisher(_objectSpread(_objectSpread({},publisher),{},{comment_error:true,comment_msg:\"Required\"}));}else{setPublisher(_objectSpread(_objectSpread({},publisher),{},{btn_loading:true}));var form_data=new FormData();for(var key in publisher){form_data.append(key,publisher[key]);}postData(\"publisher\",form_data).then(function(data){if(data.status==1){document.getElementById(\"frmPublisher\").reset();setPublisher(_objectSpread(_objectSpread({},publisher),{},{btn_loading:false,email:\"\",name:'',phone:'',comments:null}));document.getElementById(\"comments\").value=\"\";toast.success(\"\".concat(data.msg),{position:\"top-right\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}else{setPublisher(_objectSpread(_objectSpread({},publisher),{},{btn_loading:false}));toast.error(\"\".concat(data.msg),{position:\"top-right\",autoClose:2000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}});}}function handlePublisherChange(e){if(e.target.name==='name'){if(e.target.value===\"\"){var _objectSpread2;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread2={},_defineProperty(_objectSpread2,e.target.name,e.target.value),_defineProperty(_objectSpread2,\"name_error\",true),_defineProperty(_objectSpread2,\"name_msg\",\"Required\"),_objectSpread2)));}else{var _objectSpread3;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread3={},_defineProperty(_objectSpread3,e.target.name,e.target.value),_defineProperty(_objectSpread3,\"name_error\",false),_defineProperty(_objectSpread3,\"name_msg\",\"\"),_objectSpread3)));}}if(e.target.name==='phone'){if(e.target.value===\"\"){var _objectSpread4;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread4={},_defineProperty(_objectSpread4,e.target.name,e.target.value),_defineProperty(_objectSpread4,\"phone_error\",true),_defineProperty(_objectSpread4,\"phone_msg\",\"Required\"),_objectSpread4)));}else{if(e.target.value!=null||e.target.value!='null'){var mobile_chk=checkPattern(e.target.value,/^[0-9\\b]+$/);if(mobile_chk===false){var _objectSpread5;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread5={},_defineProperty(_objectSpread5,e.target.name,e.target.value),_defineProperty(_objectSpread5,\"phone_error\",true),_defineProperty(_objectSpread5,\"phone_msg\",\"Invalid phone number\"),_objectSpread5)));}else{var _objectSpread6;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread6={},_defineProperty(_objectSpread6,e.target.name,e.target.value),_defineProperty(_objectSpread6,\"phone_error\",false),_defineProperty(_objectSpread6,\"phone_msg\",\"\"),_objectSpread6)));}}}}if(e.target.name==='email'){var email_chk=checkPattern(e.target.value,/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,})+$/);if(email_chk===false){if(e.target.value===''){setPublisher(_objectSpread(_objectSpread({},publisher),{},{email_error:false}));}else{var _objectSpread7;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread7={},_defineProperty(_objectSpread7,e.target.name,e.target.value),_defineProperty(_objectSpread7,\"email_error\",true),_defineProperty(_objectSpread7,\"email_error_msg\",\"Invalid e-mail address\"),_objectSpread7)));}}else{var _objectSpread8;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread8={},_defineProperty(_objectSpread8,e.target.name,e.target.value),_defineProperty(_objectSpread8,\"email_error\",false),_defineProperty(_objectSpread8,\"email_error_msg\",\"\"),_objectSpread8)));}}if(e.target.name==='comments'){if(e.target.value===\"\"){var _objectSpread9;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread9={},_defineProperty(_objectSpread9,e.target.name,e.target.value),_defineProperty(_objectSpread9,\"comment_error\",true),_defineProperty(_objectSpread9,\"comment_msg\",\"Required\"),_objectSpread9)));}else{var _objectSpread10;setPublisher(_objectSpread(_objectSpread({},publisher),{},(_objectSpread10={},_defineProperty(_objectSpread10,e.target.name,e.target.value),_defineProperty(_objectSpread10,\"comment_error\",false),_defineProperty(_objectSpread10,\"comment_msg\",\"\"),_objectSpread10)));}}}if(loading===false)return'';return/*#__PURE__*/_jsxs(\"section\",{className:\"popup\",\"data-popup\":\"become\",style:{display:\"block\"},children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"div\",{className:\"table_dv\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table_cell\",children:/*#__PURE__*/_jsx(\"div\",{className:\"contain\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"_inner\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"x_btn\",onClick:props.closePublisherPopup}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:state.content.publisher_detail}}),/*#__PURE__*/_jsxs(\"form\",{method:\"post\",onSubmit:handleSubmit(onPublisherSubmit),id:\"frmPublisher\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_row row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-xs-12\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"require\",children:\"Full Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_blk\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",id:\"name\",className:\"input\",placeholder:\"eg: John Wick\",onChange:handlePublisherChange}),publisher.name_error===true?/*#__PURE__*/_jsxs(\"p\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fi-warning\"}),\" \",publisher.name_msg]}):\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xs-12\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"require\",children:\"Email Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_blk\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",id:\"email\",className:\"input\",placeholder:\"eg: sample@gmail.com\",onChange:handlePublisherChange}),publisher.email_error===true?/*#__PURE__*/_jsxs(\"p\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fi-warning\"}),\" \",publisher.email_error_msg]}):\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xs-12\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"require\",children:\"Phone Number\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_blk\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",id:\"phone\",className:\"input\",placeholder:\"eg: 092 1234 567\",onChange:handlePublisherChange}),publisher.phone_error===true?/*#__PURE__*/_jsxs(\"p\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fi-warning\"}),\" \",publisher.phone_msg]}):\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xs-12\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Comments\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_blk\",children:[/*#__PURE__*/_jsx(\"textarea\",{name:\"comments\",id:\"comments\",className:\"input\",placeholder:\"How can we help?\",onChange:handlePublisherChange}),publisher.comment_error===true?/*#__PURE__*/_jsxs(\"p\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fi-warning\"}),\" \",publisher.comment_msg]}):\"\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn_blk form_btn text-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"site_btn lg long purple\",disabled:publisher.btn_loading===true?'disabled':'',children:[\"Submit \",publisher.btn_loading===true?/*#__PURE__*/_jsx(\"i\",{className:\"spinner\"}):'']})})]})]})})})})]});}","map":{"version":3,"sources":["/Users/macbook/Desktop/lumicc-breera/src/components/popups/publisher.jsx"],"names":["React","useEffect","Fragment","useState","getData","getSiteImages","checkPattern","postData","useForm","ToastContainer","toast","Publisher","props","loading","setLoading","register","handleSubmit","errors","formState","state","setState","name","email","phone","comments","publisher","setPublisher","then","data","content","onPublisherSubmit","name_error","name_msg","email_error","email_error_msg","phone_error","phone_msg","comment_error","comment_msg","btn_loading","form_data","FormData","key","append","status","document","getElementById","reset","value","success","msg","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","error","handlePublisherChange","e","target","mobile_chk","email_chk","display","closePublisherPopup","__html","publisher_detail"],"mappings":"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","sourcesContent":["import React, { useEffect, Fragment, useState } from \"react\";\r\nimport { getData, getSiteImages, checkPattern, postData } from \"../../helpers/api\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nexport default function Publisher(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const { register, handleSubmit, formState: { errors } } = useForm();\r\n    const [state, setState] = useState({\r\n\r\n    });\r\n    const [publisher, setPublisher] = useState({\r\n        name: '',\r\n        email: '',\r\n        phone: '',\r\n        comments: ''\r\n    });\r\n    useEffect(() => {\r\n        getData(\"home-page\").then((data) => {\r\n            setState({\r\n                ...state,\r\n                content: data.content,\r\n            });\r\n            setLoading(true);\r\n        });\r\n    }, []);\r\n    function onPublisherSubmit() {\r\n\r\n        if (publisher.name_error === true || publisher.name === '') {\r\n            setPublisher({ ...publisher, name_error: true, name_msg: \"Required\" });\r\n        }\r\n        else if (publisher.email_error === true || publisher.email === '') {\r\n            setPublisher({ ...publisher, email_error: true, email_error_msg: \"Enter a valid email address\" });\r\n        }\r\n        else if (publisher.phone_error === true || publisher.phone === '') {\r\n            setPublisher({ ...publisher, phone_error: true, phone_msg: \"Enter a valid phone number\" });\r\n        }\r\n        else if (publisher.comment_error === true || publisher.comments === '') {\r\n            setPublisher({ ...publisher, comment_error: true, comment_msg: \"Required\" });\r\n        }\r\n        else {\r\n            setPublisher({ ...publisher, btn_loading: true });\r\n            var form_data = new FormData();\r\n\r\n            for (var key in publisher) {\r\n                form_data.append(key, publisher[key]);\r\n            }\r\n            postData(\"publisher\", form_data).then((data) => {\r\n                if (data.status == 1) {\r\n                    document.getElementById(\"frmPublisher\").reset();\r\n                    setPublisher({ ...publisher, btn_loading: false, email: \"\", name: '', phone: '', comments: null });\r\n                    document.getElementById(\"comments\").value = \"\";\r\n                    toast.success(`${data.msg}`, {\r\n                        position: \"top-right\",\r\n                        autoClose: 1000,\r\n                        hideProgressBar: false,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                    });\r\n                }\r\n                else {\r\n                    setPublisher({ ...publisher, btn_loading: false });\r\n                    toast.error(`${data.msg}`, {\r\n                        position: \"top-right\",\r\n                        autoClose: 2000,\r\n                        hideProgressBar: false,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    function handlePublisherChange(e) {\r\n        if (e.target.name === 'name') {\r\n            if (e.target.value === \"\") {\r\n                setPublisher({ ...publisher, [e.target.name]: e.target.value, name_error: true, name_msg: \"Required\" });\r\n            }\r\n            else {\r\n                setPublisher({ ...publisher, [e.target.name]: e.target.value, name_error: false, name_msg: \"\" });\r\n            }\r\n        }\r\n        if (e.target.name === 'phone') {\r\n            if (e.target.value === \"\") {\r\n                setPublisher({ ...publisher, [e.target.name]: e.target.value, phone_error: true, phone_msg: \"Required\" });\r\n            }\r\n            else {\r\n                if (e.target.value != null || e.target.value != 'null') {\r\n                    let mobile_chk = checkPattern(e.target.value, /^[0-9\\b]+$/);\r\n                    if (mobile_chk === false) {\r\n                        setPublisher({ ...publisher, [e.target.name]: e.target.value, phone_error: true, phone_msg: \"Invalid phone number\" });\r\n                    }\r\n                    else {\r\n                        setPublisher({ ...publisher, [e.target.name]: e.target.value, phone_error: false, phone_msg: \"\" });\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n        if (e.target.name === 'email') {\r\n\r\n            let email_chk = checkPattern(e.target.value, /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,})+$/);\r\n\r\n            if (email_chk === false) {\r\n                if (e.target.value === '') {\r\n                    setPublisher({ ...publisher, email_error: false });\r\n                }\r\n                else {\r\n                    setPublisher({ ...publisher, [e.target.name]: e.target.value, email_error: true, email_error_msg: \"Invalid e-mail address\" });\r\n                }\r\n\r\n            }\r\n            else {\r\n                setPublisher({ ...publisher, [e.target.name]: e.target.value, email_error: false, email_error_msg: \"\" });\r\n            }\r\n\r\n        }\r\n        if (e.target.name === 'comments') {\r\n            if (e.target.value === \"\") {\r\n                setPublisher({ ...publisher, [e.target.name]: e.target.value, comment_error: true, comment_msg: \"Required\" });\r\n            }\r\n            else {\r\n                setPublisher({ ...publisher, [e.target.name]: e.target.value, comment_error: false, comment_msg: \"\" });\r\n            }\r\n        }\r\n    }\r\n    if (loading === false) return '';\r\n    return (\r\n        <section className=\"popup\" data-popup=\"become\" style={{ display: \"block\" }}>\r\n            <ToastContainer />\r\n            <div className=\"table_dv\">\r\n                <div className=\"table_cell\">\r\n                    <div className=\"contain\">\r\n                        <div className=\"_inner\">\r\n                            <button type=\"button\" className=\"x_btn\" onClick={props.closePublisherPopup}></button>\r\n                            <div dangerouslySetInnerHTML={{ __html: state.content.publisher_detail }} />\r\n                            <form method=\"post\" onSubmit={handleSubmit(onPublisherSubmit)} id=\"frmPublisher\">\r\n                                <div className=\"form_row row\">\r\n                                    <div className=\"col-xs-12\">\r\n                                        <h6 className=\"require\">Full Name</h6>\r\n                                        <div className=\"form_blk\">\r\n                                            <input type=\"text\" name=\"name\" id=\"name\" className=\"input\" placeholder=\"eg: John Wick\" onChange={handlePublisherChange} />\r\n                                            {\r\n                                                (publisher.name_error === true) ?\r\n                                                    <p className=\"error\">\r\n                                                        <i className=\"fi-warning\"></i> {publisher.name_msg}\r\n                                                    </p>\r\n                                                    :\r\n                                                    \"\"\r\n\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-xs-12\">\r\n                                        <h6 className=\"require\">Email Address</h6>\r\n                                        <div className=\"form_blk\">\r\n                                            <input type=\"text\" name=\"email\" id=\"email\" className=\"input\" placeholder=\"eg: sample@gmail.com\" onChange={handlePublisherChange} />\r\n                                            {\r\n                                                (publisher.email_error === true) ?\r\n                                                    <p className=\"error\">\r\n                                                        <i className=\"fi-warning\"></i> {publisher.email_error_msg}\r\n                                                    </p>\r\n                                                    :\r\n                                                    \"\"\r\n\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-xs-12\">\r\n                                        <h6 className=\"require\">Phone Number</h6>\r\n                                        <div className=\"form_blk\">\r\n                                            <input type=\"text\" name=\"phone\" id=\"phone\" className=\"input\" placeholder=\"eg: 092 1234 567\" onChange={handlePublisherChange} />\r\n                                            {\r\n                                                (publisher.phone_error === true) ?\r\n                                                    <p className=\"error\">\r\n                                                        <i className=\"fi-warning\"></i> {publisher.phone_msg}\r\n                                                    </p>\r\n                                                    :\r\n                                                    \"\"\r\n\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-xs-12\">\r\n                                        <h6>Comments</h6>\r\n                                        <div className=\"form_blk\">\r\n                                            <textarea name=\"comments\" id=\"comments\" className=\"input\" placeholder=\"How can we help?\" onChange={handlePublisherChange}></textarea>\r\n                                            {\r\n                                                (publisher.comment_error === true) ?\r\n                                                    <p className=\"error\">\r\n                                                        <i className=\"fi-warning\"></i> {publisher.comment_msg}\r\n                                                    </p>\r\n                                                    :\r\n                                                    \"\"\r\n\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"btn_blk form_btn text-center\">\r\n                                    <button className=\"site_btn lg long purple\" disabled={(publisher.btn_loading === true) ? 'disabled' : ''}>Submit {(publisher.btn_loading === true) ? <i className=\"spinner\"></i> : ''}</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}